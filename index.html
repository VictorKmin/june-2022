<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"
            integrity="sha384-/KNQL8Nu5gCHLqwqfQjA689Hhoqgi2S84SNUxC3roTe4EhJ9AfLkp8QiQcU8AMzI"
            crossorigin="anonymous"></script>
</head>
<body>

<button id="sendMessage"> SEND MESSAGE</button>
<button id="joinRoom1"> JOIN ROOM 1</button>
<button id="joinRoom2"> JOIN ROOM 2</button>

<script>
  const sendMsgBtn = document.getElementById('sendMessage');
  const joinRoom1 = document.getElementById('joinRoom1');
  const joinRoom2 = document.getElementById('joinRoom2');

  const socket = io('http://localhost:5000', {
    auth: { token: '384783984783984754839487548' },
    query: { age: 20, page: 1 }
  });


  sendMsgBtn.onclick = () => {
    socket.emit('message:send', { text: 'new message available' })
  }

  socket.on('message:new', (text) => {
    document.write(text);
  })

  socket.on('test', (data) => {
    console.log(data);
  });

  socket.on('user:room:join', (userInfo) => {
    alert(`User ${userInfo} joined room`);
  });

  joinRoom1.onclick = () => {
    socket.emit('room:join', { roomId: 1 })
  }

  joinRoom2.onclick = () => {
    socket.emit('room:join', { roomId: 2 })
  }

</script>

</body>
</html>
